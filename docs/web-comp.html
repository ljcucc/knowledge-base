<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="Web Component">

  <meta property="og:site_name" content="wwwiki - ljcu.cc">
  <meta property="og:title" content="Web Component" />
  <meta property="og:description" content="" />
  <meta property="og:image" itemprop="image" content="./assets/default-header.png">
  <meta property="og:type" content="website" />

  <title>Web Component</title>
  <link rel="stylesheet" href="style.css">

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>
<body>
  <div class="toc">
      </div>

  <div class="body">
    <div class="topbar">
      <a class="title" href="index.html">wwwiki - ljcu.cc</a>
    </div>
  
    <div class="content">
            <img class="header-img" src="assets/default-header.png" alt="default header" />
      <h1 class="title">Web Component</h1>
        
  
      <h3
      id="web-component-是一個新-web-的標準web-component是網頁絕對原生支援的可移植的解決方案">Web
      component 是一個新 web 的標準，Web
      component是網頁絕對原生支援的可移植的解決方案</h3>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/xCeutzpRlzA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
      </iframe>
      <p>你有嘗試模組化你的網頁部件嗎？例如 Topbar、A login form of
      dialog、A chart or something, and why it’s so hard to
      modularization a website, for exmpale you need to build the bones
      up the project in a framework like Vue, Angular or something? So
      that’s why Web Comp got invented.</p>
      <p>From now on, you can build your website by using components
      without dealing with Frameworks, instead, browser do all the work
      for you. and because of that (running natively) you can even cross
      framework if you using web component, or if a component that built
      in framework was implemented by using web comp, which can be reuse
      with-in other framework (or without frameowrk).</p>
      <blockquote>
      <p>詳細可參考 <a
      href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">MDN
      官方文件</a></p>
      </blockquote>
      <p>現在已經有80%以上的瀏覽器支援了，如果不支援也可以使用 Polyfill
      支援 Legacy browsers。比起Vue、Angular等Framework，Web Comp
      相容於所有Framework。</p>
      <h3 id="quick-started">Quick Started</h3>
      <p>在這裡我使用 Lit 函式庫做示範, 下是一個顯示Material icon的 Web
      Comp：</p>
      <div class="sourceCode" id="cb1"><pre
      class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {LitElement<span class="op">,</span> html<span class="op">,</span> css} <span class="im">from</span> <span class="st">&#39;https://cdn.jsdelivr.net/gh/lit/dist@2/all/lit-all.min.js&#39;</span><span class="op">;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Icons <span class="kw">extends</span> LitElement{</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">static</span> properties <span class="op">=</span> {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">name</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="bu">String</span>}</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>(){</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">super</span>()<span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">name</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span> <span class="co">// default value</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">render</span>(){</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;link rel=&quot;stylesheet&quot; href=&quot;https://fonts.googleapis.com/icon?family=Material+Icons&quot;&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;i class=&quot;material-icons&quot;&gt;</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">name</span><span class="sc">}</span><span class="vs">&lt;/i&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>customElements<span class="op">.</span><span class="fu">define</span>(<span class="st">&quot;material-icons&quot;</span><span class="op">,</span> Icons)<span class="op">;</span></span></code></pre></div>
      <p>你可以把這段 JS 當作 script tag
      import，之後就可以直接使用它了⋯⋯ 就像這樣：</p>
      <div class="sourceCode" id="cb2"><pre
      class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;module&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;./icon.js&quot;</span><span class="kw">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="op">...</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>material<span class="op">-</span>icons name<span class="op">=</span><span class="st">&quot;menu&quot;</span><span class="op">&gt;&lt;/</span>material<span class="op">-</span>icons<span class="op">&gt;</span></span></code></pre></div>
      <p>你甚至可以在 Vue、React 裡面使用它。</p>
      <blockquote>
      <p>了解更多關於 lit 的實作: <a href="./web-comp-lit">Lit</a></p>
      </blockquote>
      <h3 id="how-it-works">How it works</h3>
      <p>為了因應多變的可能情況，Web Comp 基本上分為3個主要元件：</p>
      <ul>
      <li>Custom elements：用於定義 Web Comp，讓 Web Comp 可以原生使用於
      HTML</li>
      <li>Shadow DOM：用於保護 Web Comp 範圍內的 styling</li>
      <li>HTML templates：在 HTML 中定義 Web Comp 的模板</li>
      </ul>
      <h3 id="custom-elements-html-templates">Custom elements &amp; HTML
      templates</h3>
      <p>HTML:</p>
      <div class="sourceCode" id="cb3"><pre
      class="sourceCode html"><code class="sourceCode html"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- define your template for custom element --&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;template</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;my-paragraph&quot;</span><span class="kw">&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;style&gt;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    p {</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">color</span>: <span class="cn">white</span><span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>      <span class="kw">background-color</span>: <span class="cn">black</span><span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">padding</span>: <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">border-radius</span>: <span class="dv">10</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/style&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;p&gt;</span>Hello World<span class="kw">&lt;/p&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/template&gt;</span></span></code></pre></div>
      <p>JavaScript:</p>
      <div class="sourceCode" id="cb4"><pre
      class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> MyElement <span class="kw">extends</span> <span class="bu">HTMLElement</span>{</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">constructor</span>() {</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">super</span>()<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> template <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;my-paragraph&#39;</span>)<span class="op">;</span> <span class="co">// get element of template</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> templateContent <span class="op">=</span> template<span class="op">.</span><span class="at">content</span><span class="op">;</span>                 <span class="co">// get content of template</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">attachShadow</span>({<span class="dt">mode</span><span class="op">:</span> <span class="st">&#39;open&#39;</span>})<span class="op">.</span><span class="fu">appendChild</span>(            <span class="co">// turn on shadow root for protection</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      templateContent<span class="op">.</span><span class="fu">cloneNode</span>(<span class="kw">true</span>)<span class="op">;</span>                        <span class="co">// create copy of template</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>customElements<span class="op">.</span><span class="fu">define</span>(<span class="st">&#39;my-paragraph&#39;</span><span class="op">,</span> MyElement)<span class="op">;</span>             <span class="co">// define the custom element</span></span></code></pre></div>
      <p>usage:</p>
      <div class="sourceCode" id="cb5"><pre
      class="sourceCode html"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;my-paragraph&gt;&lt;/my-paragraph&gt;</span></span></code></pre></div>
      <blockquote>
      <p>ref: <a
      href="https://github.com/mdn/web-components-examples/blob/main/simple-template/main.js"
      class="uri">https://github.com/mdn/web-components-examples/blob/main/simple-template/main.js</a></p>
      </blockquote>
      <h1 id="some-useful-web-components">Some useful web
      components:</h1>
      <ul>
      <li><a
      href="https://www.webcomponents.org/element/@vanillawc/wc-codemirror">Codemirror
      for web component</a></li>
      </ul>
      <hr/>
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="創用 CC 授權條款" style="border-width:0;border-radius: 0px;" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a>
    </div>
  </div>
    <!-- image display dialog -->
  <dialog modal-mode="mega">
    <form method="dialog">
      <img id="disp-img" src="" alt="">
      <button class="menu-button" value="cancel">
        <i class="material-icons">close</i>
      </button>
    </form>
  </dialog>
  
</body>
<script>
  window.addEventListener("load", e=>{
    document.querySelectorAll("img").forEach(item => item.addEventListener("click", e => {
      console.log();
      let dialog = document.querySelector("dialog");
      document.querySelector("#disp-img").setAttribute("src", e.srcElement.getAttribute("src"));
      dialog.showModal();
    }));
  });
</script>

</html>
